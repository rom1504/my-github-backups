{
    "assignee": null,
    "body": "Lot of users want to use mineflayer on spigot, and we basically never tested it there.\r\nApparently spigot do some stuff differently:\r\n* [x] \"spawn\" event\r\n* [x] bot.players\r\n\r\nBest way would be to add spigot to the automatic tests there https://github.com/andrewrk/mineflayer/blob/master/test/externalTest.js\r\n\r\nLast person to want spigot support is @Darkfield",
    "closed_at": null,
    "comment_data": [
        {
            "body": "First thing here is automating the downloading of spigot.\r\nSee https://www.spigotmc.org/wiki/buildtools/ and https://hub.spigotmc.org/jenkins/job/BuildTools/",
            "created_at": "2015-12-19T14:06:09Z",
            "html_url": "https://github.com/PrismarineJS/mineflayer/issues/346#issuecomment-165987171",
            "id": 165987171,
            "issue_url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/346",
            "updated_at": "2015-12-19T14:06:09Z",
            "url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/comments/165987171",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2346494?v=3",
                "events_url": "https://api.github.com/users/rom1504/events{/privacy}",
                "followers_url": "https://api.github.com/users/rom1504/followers",
                "following_url": "https://api.github.com/users/rom1504/following{/other_user}",
                "gists_url": "https://api.github.com/users/rom1504/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rom1504",
                "id": 2346494,
                "login": "rom1504",
                "organizations_url": "https://api.github.com/users/rom1504/orgs",
                "received_events_url": "https://api.github.com/users/rom1504/received_events",
                "repos_url": "https://api.github.com/users/rom1504/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rom1504/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rom1504/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rom1504"
            }
        },
        {
            "body": "spigot takes like 10-15min to build, it would probably be unreasonable to put that in the circle ci tests\r\n\r\nedit: the resulting jar is 19M, maybe this could go in a circle ci thing for storing files ?",
            "created_at": "2015-12-19T14:17:56Z",
            "html_url": "https://github.com/PrismarineJS/mineflayer/issues/346#issuecomment-165987627",
            "id": 165987627,
            "issue_url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/346",
            "updated_at": "2015-12-19T14:22:15Z",
            "url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/comments/165987627",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2346494?v=3",
                "events_url": "https://api.github.com/users/rom1504/events{/privacy}",
                "followers_url": "https://api.github.com/users/rom1504/followers",
                "following_url": "https://api.github.com/users/rom1504/following{/other_user}",
                "gists_url": "https://api.github.com/users/rom1504/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rom1504",
                "id": 2346494,
                "login": "rom1504",
                "organizations_url": "https://api.github.com/users/rom1504/orgs",
                "received_events_url": "https://api.github.com/users/rom1504/received_events",
                "repos_url": "https://api.github.com/users/rom1504/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rom1504/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rom1504/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rom1504"
            }
        },
        {
            "body": "Alright I checked manually, both the spawn event and bot.players work perfectly on spigot.\r\n\r\nLetting that issue open to track further testing on spigot.",
            "created_at": "2015-12-19T14:25:29Z",
            "html_url": "https://github.com/PrismarineJS/mineflayer/issues/346#issuecomment-165988228",
            "id": 165988228,
            "issue_url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/346",
            "updated_at": "2015-12-19T14:25:29Z",
            "url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/comments/165988228",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2346494?v=3",
                "events_url": "https://api.github.com/users/rom1504/events{/privacy}",
                "followers_url": "https://api.github.com/users/rom1504/followers",
                "following_url": "https://api.github.com/users/rom1504/following{/other_user}",
                "gists_url": "https://api.github.com/users/rom1504/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rom1504",
                "id": 2346494,
                "login": "rom1504",
                "organizations_url": "https://api.github.com/users/rom1504/orgs",
                "received_events_url": "https://api.github.com/users/rom1504/received_events",
                "repos_url": "https://api.github.com/users/rom1504/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rom1504/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rom1504/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rom1504"
            }
        },
        {
            "body": "I tried, all the mineflayer tests pass on spigot.",
            "created_at": "2015-12-19T14:47:25Z",
            "html_url": "https://github.com/PrismarineJS/mineflayer/issues/346#issuecomment-165992461",
            "id": 165992461,
            "issue_url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/346",
            "updated_at": "2015-12-19T14:47:25Z",
            "url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/comments/165992461",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2346494?v=3",
                "events_url": "https://api.github.com/users/rom1504/events{/privacy}",
                "followers_url": "https://api.github.com/users/rom1504/followers",
                "following_url": "https://api.github.com/users/rom1504/following{/other_user}",
                "gists_url": "https://api.github.com/users/rom1504/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rom1504",
                "id": 2346494,
                "login": "rom1504",
                "organizations_url": "https://api.github.com/users/rom1504/orgs",
                "received_events_url": "https://api.github.com/users/rom1504/received_events",
                "repos_url": "https://api.github.com/users/rom1504/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rom1504/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rom1504/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rom1504"
            }
        },
        {
            "body": "Ah `wget http://getspigot.org/spigot18/spigot_server.jar` does it too",
            "created_at": "2015-12-19T15:01:09Z",
            "html_url": "https://github.com/PrismarineJS/mineflayer/issues/346#issuecomment-165993956",
            "id": 165993956,
            "issue_url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/346",
            "updated_at": "2015-12-19T15:01:09Z",
            "url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/comments/165993956",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2346494?v=3",
                "events_url": "https://api.github.com/users/rom1504/events{/privacy}",
                "followers_url": "https://api.github.com/users/rom1504/followers",
                "following_url": "https://api.github.com/users/rom1504/following{/other_user}",
                "gists_url": "https://api.github.com/users/rom1504/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rom1504",
                "id": 2346494,
                "login": "rom1504",
                "organizations_url": "https://api.github.com/users/rom1504/orgs",
                "received_events_url": "https://api.github.com/users/rom1504/received_events",
                "repos_url": "https://api.github.com/users/rom1504/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rom1504/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rom1504/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rom1504"
            }
        },
        {
            "body": "Some work need to be done to make external.js support multiple servers (like node-minecraft-protocol tests do) and the downloading of spigot need to be added to node-minecraft-wrap.",
            "created_at": "2015-12-19T15:06:23Z",
            "html_url": "https://github.com/PrismarineJS/mineflayer/issues/346#issuecomment-165994932",
            "id": 165994932,
            "issue_url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/346",
            "updated_at": "2015-12-19T15:06:23Z",
            "url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/comments/165994932",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2346494?v=3",
                "events_url": "https://api.github.com/users/rom1504/events{/privacy}",
                "followers_url": "https://api.github.com/users/rom1504/followers",
                "following_url": "https://api.github.com/users/rom1504/following{/other_user}",
                "gists_url": "https://api.github.com/users/rom1504/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rom1504",
                "id": 2346494,
                "login": "rom1504",
                "organizations_url": "https://api.github.com/users/rom1504/orgs",
                "received_events_url": "https://api.github.com/users/rom1504/received_events",
                "repos_url": "https://api.github.com/users/rom1504/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rom1504/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rom1504/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rom1504"
            }
        }
    ],
    "comments": 6,
    "comments_url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/346/comments",
    "created_at": "2015-12-19T14:04:18Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2143609?v=3",
                "events_url": "https://api.github.com/users/Darkfield/events{/privacy}",
                "followers_url": "https://api.github.com/users/Darkfield/followers",
                "following_url": "https://api.github.com/users/Darkfield/following{/other_user}",
                "gists_url": "https://api.github.com/users/Darkfield/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Darkfield",
                "id": 2143609,
                "login": "Darkfield",
                "organizations_url": "https://api.github.com/users/Darkfield/orgs",
                "received_events_url": "https://api.github.com/users/Darkfield/received_events",
                "repos_url": "https://api.github.com/users/Darkfield/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Darkfield/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Darkfield/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Darkfield"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2015-12-19T14:04:18Z",
            "event": "mentioned",
            "id": 496545925,
            "url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/events/496545925"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2143609?v=3",
                "events_url": "https://api.github.com/users/Darkfield/events{/privacy}",
                "followers_url": "https://api.github.com/users/Darkfield/followers",
                "following_url": "https://api.github.com/users/Darkfield/following{/other_user}",
                "gists_url": "https://api.github.com/users/Darkfield/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Darkfield",
                "id": 2143609,
                "login": "Darkfield",
                "organizations_url": "https://api.github.com/users/Darkfield/orgs",
                "received_events_url": "https://api.github.com/users/Darkfield/received_events",
                "repos_url": "https://api.github.com/users/Darkfield/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Darkfield/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Darkfield/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Darkfield"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2015-12-19T14:04:18Z",
            "event": "subscribed",
            "id": 496545926,
            "url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/events/496545926"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2346494?v=3",
                "events_url": "https://api.github.com/users/rom1504/events{/privacy}",
                "followers_url": "https://api.github.com/users/rom1504/followers",
                "following_url": "https://api.github.com/users/rom1504/following{/other_user}",
                "gists_url": "https://api.github.com/users/rom1504/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rom1504",
                "id": 2346494,
                "login": "rom1504",
                "organizations_url": "https://api.github.com/users/rom1504/orgs",
                "received_events_url": "https://api.github.com/users/rom1504/received_events",
                "repos_url": "https://api.github.com/users/rom1504/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rom1504/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rom1504/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rom1504"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2015-12-19T14:04:29Z",
            "event": "labeled",
            "id": 496545975,
            "label": {
                "color": "fbca04",
                "name": "testing"
            },
            "url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/events/496545975"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2346494?v=3",
                "events_url": "https://api.github.com/users/rom1504/events{/privacy}",
                "followers_url": "https://api.github.com/users/rom1504/followers",
                "following_url": "https://api.github.com/users/rom1504/following{/other_user}",
                "gists_url": "https://api.github.com/users/rom1504/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rom1504",
                "id": 2346494,
                "login": "rom1504",
                "organizations_url": "https://api.github.com/users/rom1504/orgs",
                "received_events_url": "https://api.github.com/users/rom1504/received_events",
                "repos_url": "https://api.github.com/users/rom1504/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rom1504/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rom1504/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rom1504"
            },
            "commit_id": "fea7be6ce33ef11fd88fe9520842f2702bb8831e",
            "commit_url": "https://api.github.com/repos/PrismarineJS/mineflayer/commits/fea7be6ce33ef11fd88fe9520842f2702bb8831e",
            "created_at": "2015-12-19T14:56:52Z",
            "event": "referenced",
            "id": 496561459,
            "url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/events/496561459"
        }
    ],
    "events_url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/346/events",
    "html_url": "https://github.com/PrismarineJS/mineflayer/issues/346",
    "id": 123086927,
    "labels": [
        {
            "color": "fbca04",
            "name": "testing",
            "url": "https://api.github.com/repos/PrismarineJS/mineflayer/labels/testing"
        }
    ],
    "labels_url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/346/labels{/name}",
    "locked": false,
    "milestone": null,
    "number": 346,
    "repository_url": "https://api.github.com/repos/PrismarineJS/mineflayer",
    "state": "open",
    "title": "Support spigot",
    "updated_at": "2015-12-19T15:06:23Z",
    "url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/346",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/2346494?v=3",
        "events_url": "https://api.github.com/users/rom1504/events{/privacy}",
        "followers_url": "https://api.github.com/users/rom1504/followers",
        "following_url": "https://api.github.com/users/rom1504/following{/other_user}",
        "gists_url": "https://api.github.com/users/rom1504/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/rom1504",
        "id": 2346494,
        "login": "rom1504",
        "organizations_url": "https://api.github.com/users/rom1504/orgs",
        "received_events_url": "https://api.github.com/users/rom1504/received_events",
        "repos_url": "https://api.github.com/users/rom1504/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/rom1504/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/rom1504/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/rom1504"
    }
}