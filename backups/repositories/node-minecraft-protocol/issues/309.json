{
    "assignee": null,
    "body": "The packets test all pass but there are still problems in the other two test series.\r\n\r\nworks with https://github.com/roblabla/ProtoDef/pull/43",
    "closed_at": null,
    "comment_data": [
        {
            "body": "So the current problem here is that the new parser is async unlike the old one. What that means is you can't change the parser sync and expect it to be changed right now like we expect it currently (and the vanilla server expect it too) : getting a handshake packet and then a play packet for example.\r\n(I think similarly the decompressor is now async, not sure if that's a problem)\r\n\r\nA way to solve this might be to have a parser handling all states in nmp and just routing the chunks to the different state parser.\r\n\r\nI think there is some ready to use router stream, see if that's interesting. (stream-router package seems to have nothing to do with this)",
            "created_at": "2015-12-21T05:00:44Z",
            "html_url": "https://github.com/PrismarineJS/node-minecraft-protocol/pull/309#issuecomment-166203114",
            "id": 166203114,
            "issue_url": "https://api.github.com/repos/PrismarineJS/node-minecraft-protocol/issues/309",
            "updated_at": "2015-12-21T05:02:20Z",
            "url": "https://api.github.com/repos/PrismarineJS/node-minecraft-protocol/issues/comments/166203114",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2346494?v=3",
                "events_url": "https://api.github.com/users/rom1504/events{/privacy}",
                "followers_url": "https://api.github.com/users/rom1504/followers",
                "following_url": "https://api.github.com/users/rom1504/following{/other_user}",
                "gists_url": "https://api.github.com/users/rom1504/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rom1504",
                "id": 2346494,
                "login": "rom1504",
                "organizations_url": "https://api.github.com/users/rom1504/orgs",
                "received_events_url": "https://api.github.com/users/rom1504/received_events",
                "repos_url": "https://api.github.com/users/rom1504/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rom1504/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rom1504/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rom1504"
            }
        },
        {
            "body": "https://github.com/rom1504/node-minecraft-protocol/commit/0a6707c357c4bcdf54301caab056e610ff7edc62 makes mc-server tests pass but it doesn't make the proxy work for example. Probably because the vanilla server is not as nice as to wait a bit before sending packets of the next state.",
            "created_at": "2015-12-21T14:34:29Z",
            "html_url": "https://github.com/PrismarineJS/node-minecraft-protocol/pull/309#issuecomment-166318527",
            "id": 166318527,
            "issue_url": "https://api.github.com/repos/PrismarineJS/node-minecraft-protocol/issues/309",
            "updated_at": "2015-12-21T14:34:29Z",
            "url": "https://api.github.com/repos/PrismarineJS/node-minecraft-protocol/issues/comments/166318527",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2346494?v=3",
                "events_url": "https://api.github.com/users/rom1504/events{/privacy}",
                "followers_url": "https://api.github.com/users/rom1504/followers",
                "following_url": "https://api.github.com/users/rom1504/following{/other_user}",
                "gists_url": "https://api.github.com/users/rom1504/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rom1504",
                "id": 2346494,
                "login": "rom1504",
                "organizations_url": "https://api.github.com/users/rom1504/orgs",
                "received_events_url": "https://api.github.com/users/rom1504/received_events",
                "repos_url": "https://api.github.com/users/rom1504/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rom1504/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rom1504/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rom1504"
            }
        },
        {
            "body": "I think the serializer need to know about the states, and what should change them.\r\nI can't see how else it can parse packets properly.\r\nI don't even understand why master currently works.",
            "created_at": "2015-12-23T02:55:32Z",
            "html_url": "https://github.com/PrismarineJS/node-minecraft-protocol/pull/309#issuecomment-166793030",
            "id": 166793030,
            "issue_url": "https://api.github.com/repos/PrismarineJS/node-minecraft-protocol/issues/309",
            "updated_at": "2015-12-23T02:55:32Z",
            "url": "https://api.github.com/repos/PrismarineJS/node-minecraft-protocol/issues/comments/166793030",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2346494?v=3",
                "events_url": "https://api.github.com/users/rom1504/events{/privacy}",
                "followers_url": "https://api.github.com/users/rom1504/followers",
                "following_url": "https://api.github.com/users/rom1504/following{/other_user}",
                "gists_url": "https://api.github.com/users/rom1504/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rom1504",
                "id": 2346494,
                "login": "rom1504",
                "organizations_url": "https://api.github.com/users/rom1504/orgs",
                "received_events_url": "https://api.github.com/users/rom1504/received_events",
                "repos_url": "https://api.github.com/users/rom1504/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rom1504/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rom1504/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rom1504"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/PrismarineJS/node-minecraft-protocol/issues/309/comments",
    "created_at": "2015-12-20T03:32:19Z",
    "event_data": [],
    "events_url": "https://api.github.com/repos/PrismarineJS/node-minecraft-protocol/issues/309/events",
    "html_url": "https://github.com/PrismarineJS/node-minecraft-protocol/pull/309",
    "id": 123129819,
    "labels": [],
    "labels_url": "https://api.github.com/repos/PrismarineJS/node-minecraft-protocol/issues/309/labels{/name}",
    "locked": false,
    "milestone": null,
    "number": 309,
    "pull_request": {
        "diff_url": "https://github.com/PrismarineJS/node-minecraft-protocol/pull/309.diff",
        "html_url": "https://github.com/PrismarineJS/node-minecraft-protocol/pull/309",
        "patch_url": "https://github.com/PrismarineJS/node-minecraft-protocol/pull/309.patch",
        "url": "https://api.github.com/repos/PrismarineJS/node-minecraft-protocol/pulls/309"
    },
    "repository_url": "https://api.github.com/repos/PrismarineJS/node-minecraft-protocol",
    "state": "open",
    "title": "[WIP] Update to new protodef",
    "updated_at": "2015-12-23T02:55:32Z",
    "url": "https://api.github.com/repos/PrismarineJS/node-minecraft-protocol/issues/309",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/2346494?v=3",
        "events_url": "https://api.github.com/users/rom1504/events{/privacy}",
        "followers_url": "https://api.github.com/users/rom1504/followers",
        "following_url": "https://api.github.com/users/rom1504/following{/other_user}",
        "gists_url": "https://api.github.com/users/rom1504/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/rom1504",
        "id": 2346494,
        "login": "rom1504",
        "organizations_url": "https://api.github.com/users/rom1504/orgs",
        "received_events_url": "https://api.github.com/users/rom1504/received_events",
        "repos_url": "https://api.github.com/users/rom1504/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/rom1504/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/rom1504/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/rom1504"
    }
}