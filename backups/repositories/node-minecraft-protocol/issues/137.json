{
    "assignee": null,
    "body": "https://github.com/PrismarineJS/node-minecraft-protocol/pull/71 added support for browserify by overriding index.js with a browserify-specific browser.js exposing only the `protocol` submodule, a subset of node-minecraft-protocol that works well in web browsers. This PR additionally exposes the `Client` class, which is also browserifiable (I am using it in https://github.com/deathcap/wsmc, previously as require('minecraft-protocol/lib/client') until GH-136; cleaner to expose on the default export anyways). \r\n\r\nFor comparison here's the exports from the (non-browser) dist/index.js:\r\n\r\n```javascript\r\nmodule.exports = {\r\n  createClient: createClient,\r\n  createServer: createServer,\r\n  Client: Client,\r\n  Server: Server,\r\n  ping: require(\"./ping\"),\r\n  protocol: protocol,\r\n  yggdrasil: Yggdrasil };\r\n```\r\n\r\nand the updated browser.js:\r\n\r\n```javascript\r\n module.exports = {\r\n  Client: require('./dist/client'),\r\n   protocol: require('./dist/protocol')\r\n };\r\n```\r\n\r\ncreateServer and createClient use ursa so cannot currently be exposed in the browser (despite ursa-purejs — but out of scope of this issue), yggdrasil uses a third-party authentication server so it cannot be used either (without, e.g., a CORS proxy, or replacing with OAuth, etc.), Server and ping might work but haven't tested (if they do, can be exposed later if needed), but both `protocol` and `Client` definitely work so can be safely exported here.",
    "closed_at": "2015-03-29T20:21:13Z",
    "comment_data": [
        {
            "body": "I'm a bit iffy on merging this. By default, browserify isn't capable of browserifying the \"net\" module, since the browser can't do raw TCP. Things inside the \"index.js\" is what I consider being part of the public API for desktop, and similarely, things inside \"browser.js\" is what I consider being part of the browser public API (which can only create and read raw packet buffers).\r\n\r\nHaving net, an obviously moving target, being part of the browser.js interface, feels hackish to me.\r\n\r\nWe _could_ refactor Client such that connect lives inside index.js, and client only exposes setSocket ? That would remove the client.js dependency on net.",
            "created_at": "2015-03-23T01:47:05Z",
            "html_url": "https://github.com/PrismarineJS/node-minecraft-protocol/pull/137#issuecomment-84746739",
            "id": 84746739,
            "issue_url": "https://api.github.com/repos/PrismarineJS/node-minecraft-protocol/issues/137",
            "updated_at": "2015-03-23T01:47:35Z",
            "url": "https://api.github.com/repos/PrismarineJS/node-minecraft-protocol/issues/comments/84746739",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1069318?v=3",
                "events_url": "https://api.github.com/users/roblabla/events{/privacy}",
                "followers_url": "https://api.github.com/users/roblabla/followers",
                "following_url": "https://api.github.com/users/roblabla/following{/other_user}",
                "gists_url": "https://api.github.com/users/roblabla/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/roblabla",
                "id": 1069318,
                "login": "roblabla",
                "organizations_url": "https://api.github.com/users/roblabla/orgs",
                "received_events_url": "https://api.github.com/users/roblabla/received_events",
                "repos_url": "https://api.github.com/users/roblabla/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/roblabla/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/roblabla/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/roblabla"
            }
        },
        {
            "body": ":+1:  to moving `net` (and `dns`) out of client.js. Updated this PR with this change, moving the network-specific code.\r\n\r\nNote that browserify stubs `net` and other non-browserifiable nodejs core modules with an empty module: https://github.com/substack/node-browserify/blob/master/lib/builtins.js#L16 - so the code still works on the browser, but I agree it is cleaner to make this refactor.\r\n\r\n`client.js` now only exposes \"setSocket\", which actually accepts any `Stream`: this not only includes TCP sockets, but I've also used it with [websocket-stream](https://www.npmjs.com/package/websocket-stream) and [workerstream](https://www.npmjs.com/package/workerstream). Anything implementing an appropriate Stream interface should work.\r\n\r\n\r\n",
            "created_at": "2015-03-29T06:35:47Z",
            "html_url": "https://github.com/PrismarineJS/node-minecraft-protocol/pull/137#issuecomment-87364111",
            "id": 87364111,
            "issue_url": "https://api.github.com/repos/PrismarineJS/node-minecraft-protocol/issues/137",
            "updated_at": "2015-03-29T06:36:08Z",
            "url": "https://api.github.com/repos/PrismarineJS/node-minecraft-protocol/issues/comments/87364111",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5897956?v=3",
                "events_url": "https://api.github.com/users/deathcap/events{/privacy}",
                "followers_url": "https://api.github.com/users/deathcap/followers",
                "following_url": "https://api.github.com/users/deathcap/following{/other_user}",
                "gists_url": "https://api.github.com/users/deathcap/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/deathcap",
                "id": 5897956,
                "login": "deathcap",
                "organizations_url": "https://api.github.com/users/deathcap/orgs",
                "received_events_url": "https://api.github.com/users/deathcap/received_events",
                "repos_url": "https://api.github.com/users/deathcap/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/deathcap/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/deathcap/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/deathcap"
            }
        },
        {
            "body": "Oh, I didn't know that. Anyway, thanks for the update ! Merging. ",
            "created_at": "2015-03-29T20:20:58Z",
            "html_url": "https://github.com/PrismarineJS/node-minecraft-protocol/pull/137#issuecomment-87469085",
            "id": 87469085,
            "issue_url": "https://api.github.com/repos/PrismarineJS/node-minecraft-protocol/issues/137",
            "updated_at": "2015-03-29T20:20:58Z",
            "url": "https://api.github.com/repos/PrismarineJS/node-minecraft-protocol/issues/comments/87469085",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1069318?v=3",
                "events_url": "https://api.github.com/users/roblabla/events{/privacy}",
                "followers_url": "https://api.github.com/users/roblabla/followers",
                "following_url": "https://api.github.com/users/roblabla/following{/other_user}",
                "gists_url": "https://api.github.com/users/roblabla/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/roblabla",
                "id": 1069318,
                "login": "roblabla",
                "organizations_url": "https://api.github.com/users/roblabla/orgs",
                "received_events_url": "https://api.github.com/users/roblabla/received_events",
                "repos_url": "https://api.github.com/users/roblabla/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/roblabla/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/roblabla/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/roblabla"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/PrismarineJS/node-minecraft-protocol/issues/137/comments",
    "created_at": "2015-03-23T01:17:59Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5897956?v=3",
                "events_url": "https://api.github.com/users/deathcap/events{/privacy}",
                "followers_url": "https://api.github.com/users/deathcap/followers",
                "following_url": "https://api.github.com/users/deathcap/following{/other_user}",
                "gists_url": "https://api.github.com/users/deathcap/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/deathcap",
                "id": 5897956,
                "login": "deathcap",
                "organizations_url": "https://api.github.com/users/deathcap/orgs",
                "received_events_url": "https://api.github.com/users/deathcap/received_events",
                "repos_url": "https://api.github.com/users/deathcap/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/deathcap/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/deathcap/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/deathcap"
            },
            "commit_id": "774a41c2385cc5bb09517821a0bce602381ffe61",
            "commit_url": "https://api.github.com/repos/deathcap/wsmc/commits/774a41c2385cc5bb09517821a0bce602381ffe61",
            "created_at": "2015-03-23T01:25:25Z",
            "event": "referenced",
            "id": 261801121,
            "url": "https://api.github.com/repos/PrismarineJS/node-minecraft-protocol/issues/events/261801121"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5897956?v=3",
                "events_url": "https://api.github.com/users/deathcap/events{/privacy}",
                "followers_url": "https://api.github.com/users/deathcap/followers",
                "following_url": "https://api.github.com/users/deathcap/following{/other_user}",
                "gists_url": "https://api.github.com/users/deathcap/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/deathcap",
                "id": 5897956,
                "login": "deathcap",
                "organizations_url": "https://api.github.com/users/deathcap/orgs",
                "received_events_url": "https://api.github.com/users/deathcap/received_events",
                "repos_url": "https://api.github.com/users/deathcap/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/deathcap/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/deathcap/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/deathcap"
            },
            "commit_id": "2a4416adcd39a2403a3a73cf1adc947ec1aaa5e8",
            "commit_url": "https://api.github.com/repos/deathcap/wsmc/commits/2a4416adcd39a2403a3a73cf1adc947ec1aaa5e8",
            "created_at": "2015-03-29T06:39:37Z",
            "event": "referenced",
            "id": 267816761,
            "url": "https://api.github.com/repos/PrismarineJS/node-minecraft-protocol/issues/events/267816761"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1069318?v=3",
                "events_url": "https://api.github.com/users/roblabla/events{/privacy}",
                "followers_url": "https://api.github.com/users/roblabla/followers",
                "following_url": "https://api.github.com/users/roblabla/following{/other_user}",
                "gists_url": "https://api.github.com/users/roblabla/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/roblabla",
                "id": 1069318,
                "login": "roblabla",
                "organizations_url": "https://api.github.com/users/roblabla/orgs",
                "received_events_url": "https://api.github.com/users/roblabla/received_events",
                "repos_url": "https://api.github.com/users/roblabla/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/roblabla/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/roblabla/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/roblabla"
            },
            "commit_id": "26e6a388130cb5dcfe8511c8a0824b35e83fd460",
            "commit_url": "https://api.github.com/repos/PrismarineJS/node-minecraft-protocol/commits/26e6a388130cb5dcfe8511c8a0824b35e83fd460",
            "created_at": "2015-03-29T20:21:13Z",
            "event": "referenced",
            "id": 267999946,
            "url": "https://api.github.com/repos/PrismarineJS/node-minecraft-protocol/issues/events/267999946"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1069318?v=3",
                "events_url": "https://api.github.com/users/roblabla/events{/privacy}",
                "followers_url": "https://api.github.com/users/roblabla/followers",
                "following_url": "https://api.github.com/users/roblabla/following{/other_user}",
                "gists_url": "https://api.github.com/users/roblabla/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/roblabla",
                "id": 1069318,
                "login": "roblabla",
                "organizations_url": "https://api.github.com/users/roblabla/orgs",
                "received_events_url": "https://api.github.com/users/roblabla/received_events",
                "repos_url": "https://api.github.com/users/roblabla/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/roblabla/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/roblabla/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/roblabla"
            },
            "commit_id": "26e6a388130cb5dcfe8511c8a0824b35e83fd460",
            "commit_url": "https://api.github.com/repos/PrismarineJS/node-minecraft-protocol/commits/26e6a388130cb5dcfe8511c8a0824b35e83fd460",
            "created_at": "2015-03-29T20:21:13Z",
            "event": "merged",
            "id": 267999947,
            "url": "https://api.github.com/repos/PrismarineJS/node-minecraft-protocol/issues/events/267999947"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1069318?v=3",
                "events_url": "https://api.github.com/users/roblabla/events{/privacy}",
                "followers_url": "https://api.github.com/users/roblabla/followers",
                "following_url": "https://api.github.com/users/roblabla/following{/other_user}",
                "gists_url": "https://api.github.com/users/roblabla/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/roblabla",
                "id": 1069318,
                "login": "roblabla",
                "organizations_url": "https://api.github.com/users/roblabla/orgs",
                "received_events_url": "https://api.github.com/users/roblabla/received_events",
                "repos_url": "https://api.github.com/users/roblabla/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/roblabla/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/roblabla/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/roblabla"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2015-03-29T20:21:13Z",
            "event": "closed",
            "id": 267999948,
            "url": "https://api.github.com/repos/PrismarineJS/node-minecraft-protocol/issues/events/267999948"
        }
    ],
    "events_url": "https://api.github.com/repos/PrismarineJS/node-minecraft-protocol/issues/137/events",
    "html_url": "https://github.com/PrismarineJS/node-minecraft-protocol/pull/137",
    "id": 63597316,
    "labels": [],
    "labels_url": "https://api.github.com/repos/PrismarineJS/node-minecraft-protocol/issues/137/labels{/name}",
    "locked": false,
    "milestone": null,
    "number": 137,
    "pull_request": {
        "diff_url": "https://github.com/PrismarineJS/node-minecraft-protocol/pull/137.diff",
        "html_url": "https://github.com/PrismarineJS/node-minecraft-protocol/pull/137",
        "patch_url": "https://github.com/PrismarineJS/node-minecraft-protocol/pull/137.patch",
        "url": "https://api.github.com/repos/PrismarineJS/node-minecraft-protocol/pulls/137"
    },
    "state": "closed",
    "title": "Expose the Client class to browser",
    "updated_at": "2015-03-29T20:21:14Z",
    "url": "https://api.github.com/repos/PrismarineJS/node-minecraft-protocol/issues/137",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/5897956?v=3",
        "events_url": "https://api.github.com/users/deathcap/events{/privacy}",
        "followers_url": "https://api.github.com/users/deathcap/followers",
        "following_url": "https://api.github.com/users/deathcap/following{/other_user}",
        "gists_url": "https://api.github.com/users/deathcap/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/deathcap",
        "id": 5897956,
        "login": "deathcap",
        "organizations_url": "https://api.github.com/users/deathcap/orgs",
        "received_events_url": "https://api.github.com/users/deathcap/received_events",
        "repos_url": "https://api.github.com/users/deathcap/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/deathcap/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/deathcap/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/deathcap"
    }
}