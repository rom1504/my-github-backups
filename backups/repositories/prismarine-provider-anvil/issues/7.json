{
    "assignee": null,
    "body": "inspired by https://github.com/wurstmineberg/python-anvil/blob/master/anvil.py\r\n\r\nObjectives:\r\n* [x] read a chunk x,z\r\n* [x] convert it in prismarine-chunk\r\n* [x] modify a chunk x,z\r\n* [x] create the file for chunk x,z if needed\r\n* [x] from a prismarine-chunk\r\n\r\nGoing for a simple implementation using buffers directly. Might be reimplemented using protodef later (or not, not sure protodef quite fits here)",
    "closed_at": "2016-01-04T20:18:40Z",
    "comment_data": [
        {
            "body": "use https://nodejs.org/api/fs.html#fs_fs_read_fd_buffer_offset_length_position_callback to only read the part of the file needed. (same for writing)",
            "created_at": "2015-12-23T20:12:25Z",
            "html_url": "https://github.com/PrismarineJS/prismarine-provider-anvil/pull/7#issuecomment-166982624",
            "id": 166982624,
            "issue_url": "https://api.github.com/repos/PrismarineJS/prismarine-provider-anvil/issues/7",
            "updated_at": "2015-12-23T20:12:25Z",
            "url": "https://api.github.com/repos/PrismarineJS/prismarine-provider-anvil/issues/comments/166982624",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2346494?v=3",
                "events_url": "https://api.github.com/users/rom1504/events{/privacy}",
                "followers_url": "https://api.github.com/users/rom1504/followers",
                "following_url": "https://api.github.com/users/rom1504/following{/other_user}",
                "gists_url": "https://api.github.com/users/rom1504/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rom1504",
                "id": 2346494,
                "login": "rom1504",
                "organizations_url": "https://api.github.com/users/rom1504/orgs",
                "received_events_url": "https://api.github.com/users/rom1504/received_events",
                "repos_url": "https://api.github.com/users/rom1504/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rom1504/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rom1504/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rom1504"
            }
        },
        {
            "body": "Reimplemented again to handle writing properly using http://pastebin.com/niWTqLvk\r\n\r\nIt works fine now. Only thing remaining: doing the chunk-nbt <---> prismarine-chunk conversion.",
            "created_at": "2015-12-30T01:39:12Z",
            "html_url": "https://github.com/PrismarineJS/prismarine-provider-anvil/pull/7#issuecomment-167915217",
            "id": 167915217,
            "issue_url": "https://api.github.com/repos/PrismarineJS/prismarine-provider-anvil/issues/7",
            "updated_at": "2015-12-30T01:39:12Z",
            "url": "https://api.github.com/repos/PrismarineJS/prismarine-provider-anvil/issues/comments/167915217",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2346494?v=3",
                "events_url": "https://api.github.com/users/rom1504/events{/privacy}",
                "followers_url": "https://api.github.com/users/rom1504/followers",
                "following_url": "https://api.github.com/users/rom1504/following{/other_user}",
                "gists_url": "https://api.github.com/users/rom1504/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rom1504",
                "id": 2346494,
                "login": "rom1504",
                "organizations_url": "https://api.github.com/users/rom1504/orgs",
                "received_events_url": "https://api.github.com/users/rom1504/received_events",
                "repos_url": "https://api.github.com/users/rom1504/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rom1504/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rom1504/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rom1504"
            }
        },
        {
            "body": "consider using https://github.com/andrewrk/node-fd-slicer to avoid read/write concurrency problems",
            "created_at": "2016-01-01T00:16:47Z",
            "html_url": "https://github.com/PrismarineJS/prismarine-provider-anvil/pull/7#issuecomment-168265906",
            "id": 168265906,
            "issue_url": "https://api.github.com/repos/PrismarineJS/prismarine-provider-anvil/issues/7",
            "updated_at": "2016-01-01T00:16:47Z",
            "url": "https://api.github.com/repos/PrismarineJS/prismarine-provider-anvil/issues/comments/168265906",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2346494?v=3",
                "events_url": "https://api.github.com/users/rom1504/events{/privacy}",
                "followers_url": "https://api.github.com/users/rom1504/followers",
                "following_url": "https://api.github.com/users/rom1504/following{/other_user}",
                "gists_url": "https://api.github.com/users/rom1504/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rom1504",
                "id": 2346494,
                "login": "rom1504",
                "organizations_url": "https://api.github.com/users/rom1504/orgs",
                "received_events_url": "https://api.github.com/users/rom1504/received_events",
                "repos_url": "https://api.github.com/users/rom1504/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rom1504/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rom1504/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rom1504"
            }
        },
        {
            "body": "basic functionality is there but testing with flying-squid, it seems there is a bug with concurrently writing chunks, see ![gold fail](http://download.rom1504.fr/stuff/mc-saving-gold-fail.png)\r\n\r\nadd some test for concurrent writing\r\n\r\nedit: or add a queue and just don't do concurrent writing, not sure.",
            "created_at": "2016-01-03T20:58:47Z",
            "html_url": "https://github.com/PrismarineJS/prismarine-provider-anvil/pull/7#issuecomment-168540399",
            "id": 168540399,
            "issue_url": "https://api.github.com/repos/PrismarineJS/prismarine-provider-anvil/issues/7",
            "updated_at": "2016-01-03T21:34:26Z",
            "url": "https://api.github.com/repos/PrismarineJS/prismarine-provider-anvil/issues/comments/168540399",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2346494?v=3",
                "events_url": "https://api.github.com/users/rom1504/events{/privacy}",
                "followers_url": "https://api.github.com/users/rom1504/followers",
                "following_url": "https://api.github.com/users/rom1504/following{/other_user}",
                "gists_url": "https://api.github.com/users/rom1504/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rom1504",
                "id": 2346494,
                "login": "rom1504",
                "organizations_url": "https://api.github.com/users/rom1504/orgs",
                "received_events_url": "https://api.github.com/users/rom1504/received_events",
                "repos_url": "https://api.github.com/users/rom1504/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rom1504/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rom1504/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rom1504"
            }
        },
        {
            "body": "Actually testing things, it seems this is not a concurrency problem at all. Saving just seems to be broken in some other way.",
            "created_at": "2016-01-04T15:35:20Z",
            "html_url": "https://github.com/PrismarineJS/prismarine-provider-anvil/pull/7#issuecomment-168708318",
            "id": 168708318,
            "issue_url": "https://api.github.com/repos/PrismarineJS/prismarine-provider-anvil/issues/7",
            "updated_at": "2016-01-04T15:35:20Z",
            "url": "https://api.github.com/repos/PrismarineJS/prismarine-provider-anvil/issues/comments/168708318",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2346494?v=3",
                "events_url": "https://api.github.com/users/rom1504/events{/privacy}",
                "followers_url": "https://api.github.com/users/rom1504/followers",
                "following_url": "https://api.github.com/users/rom1504/following{/other_user}",
                "gists_url": "https://api.github.com/users/rom1504/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rom1504",
                "id": 2346494,
                "login": "rom1504",
                "organizations_url": "https://api.github.com/users/rom1504/orgs",
                "received_events_url": "https://api.github.com/users/rom1504/received_events",
                "repos_url": "https://api.github.com/users/rom1504/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rom1504/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rom1504/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rom1504"
            }
        },
        {
            "body": "it works :) ![success](http://download.rom1504.fr/stuff/mc-successful-saving.png)\r\n\r\nI'm going to play a bit with the prismarine-world implementation now and then release everything",
            "created_at": "2016-01-04T19:35:54Z",
            "html_url": "https://github.com/PrismarineJS/prismarine-provider-anvil/pull/7#issuecomment-168779596",
            "id": 168779596,
            "issue_url": "https://api.github.com/repos/PrismarineJS/prismarine-provider-anvil/issues/7",
            "updated_at": "2016-01-04T19:35:54Z",
            "url": "https://api.github.com/repos/PrismarineJS/prismarine-provider-anvil/issues/comments/168779596",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2346494?v=3",
                "events_url": "https://api.github.com/users/rom1504/events{/privacy}",
                "followers_url": "https://api.github.com/users/rom1504/followers",
                "following_url": "https://api.github.com/users/rom1504/following{/other_user}",
                "gists_url": "https://api.github.com/users/rom1504/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rom1504",
                "id": 2346494,
                "login": "rom1504",
                "organizations_url": "https://api.github.com/users/rom1504/orgs",
                "received_events_url": "https://api.github.com/users/rom1504/received_events",
                "repos_url": "https://api.github.com/users/rom1504/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rom1504/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rom1504/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rom1504"
            }
        },
        {
            "body": "And merging :)",
            "created_at": "2016-01-04T20:18:38Z",
            "html_url": "https://github.com/PrismarineJS/prismarine-provider-anvil/pull/7#issuecomment-168793212",
            "id": 168793212,
            "issue_url": "https://api.github.com/repos/PrismarineJS/prismarine-provider-anvil/issues/7",
            "updated_at": "2016-01-04T20:18:38Z",
            "url": "https://api.github.com/repos/PrismarineJS/prismarine-provider-anvil/issues/comments/168793212",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2346494?v=3",
                "events_url": "https://api.github.com/users/rom1504/events{/privacy}",
                "followers_url": "https://api.github.com/users/rom1504/followers",
                "following_url": "https://api.github.com/users/rom1504/following{/other_user}",
                "gists_url": "https://api.github.com/users/rom1504/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rom1504",
                "id": 2346494,
                "login": "rom1504",
                "organizations_url": "https://api.github.com/users/rom1504/orgs",
                "received_events_url": "https://api.github.com/users/rom1504/received_events",
                "repos_url": "https://api.github.com/users/rom1504/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rom1504/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rom1504/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rom1504"
            }
        },
        {
            "body": "for reference, this is an other re-implementation of the regionfile class https://github.com/mcedit/mcedit2/blob/master/src/mceditlib/pc/regionfile.py (from java)\r\n\r\nThere are cool stuff in that repo",
            "created_at": "2016-01-10T01:31:10Z",
            "html_url": "https://github.com/PrismarineJS/prismarine-provider-anvil/pull/7#issuecomment-170299459",
            "id": 170299459,
            "issue_url": "https://api.github.com/repos/PrismarineJS/prismarine-provider-anvil/issues/7",
            "updated_at": "2016-01-10T01:31:10Z",
            "url": "https://api.github.com/repos/PrismarineJS/prismarine-provider-anvil/issues/comments/170299459",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2346494?v=3",
                "events_url": "https://api.github.com/users/rom1504/events{/privacy}",
                "followers_url": "https://api.github.com/users/rom1504/followers",
                "following_url": "https://api.github.com/users/rom1504/following{/other_user}",
                "gists_url": "https://api.github.com/users/rom1504/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rom1504",
                "id": 2346494,
                "login": "rom1504",
                "organizations_url": "https://api.github.com/users/rom1504/orgs",
                "received_events_url": "https://api.github.com/users/rom1504/received_events",
                "repos_url": "https://api.github.com/users/rom1504/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rom1504/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rom1504/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rom1504"
            }
        }
    ],
    "comments": 8,
    "comments_url": "https://api.github.com/repos/PrismarineJS/prismarine-provider-anvil/issues/7/comments",
    "created_at": "2015-12-22T21:08:45Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2346494?v=3",
                "events_url": "https://api.github.com/users/rom1504/events{/privacy}",
                "followers_url": "https://api.github.com/users/rom1504/followers",
                "following_url": "https://api.github.com/users/rom1504/following{/other_user}",
                "gists_url": "https://api.github.com/users/rom1504/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rom1504",
                "id": 2346494,
                "login": "rom1504",
                "organizations_url": "https://api.github.com/users/rom1504/orgs",
                "received_events_url": "https://api.github.com/users/rom1504/received_events",
                "repos_url": "https://api.github.com/users/rom1504/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rom1504/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rom1504/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rom1504"
            },
            "commit_id": "e96122d90d8a226c0867585458127c9435a9e3b1",
            "commit_url": "https://api.github.com/repos/PrismarineJS/prismarine-provider-anvil/commits/e96122d90d8a226c0867585458127c9435a9e3b1",
            "created_at": "2016-01-04T20:18:40Z",
            "event": "referenced",
            "id": 505178843,
            "url": "https://api.github.com/repos/PrismarineJS/prismarine-provider-anvil/issues/events/505178843"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2346494?v=3",
                "events_url": "https://api.github.com/users/rom1504/events{/privacy}",
                "followers_url": "https://api.github.com/users/rom1504/followers",
                "following_url": "https://api.github.com/users/rom1504/following{/other_user}",
                "gists_url": "https://api.github.com/users/rom1504/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rom1504",
                "id": 2346494,
                "login": "rom1504",
                "organizations_url": "https://api.github.com/users/rom1504/orgs",
                "received_events_url": "https://api.github.com/users/rom1504/received_events",
                "repos_url": "https://api.github.com/users/rom1504/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rom1504/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rom1504/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rom1504"
            },
            "commit_id": "e96122d90d8a226c0867585458127c9435a9e3b1",
            "commit_url": "https://api.github.com/repos/PrismarineJS/prismarine-provider-anvil/commits/e96122d90d8a226c0867585458127c9435a9e3b1",
            "created_at": "2016-01-04T20:18:40Z",
            "event": "merged",
            "id": 505178844,
            "url": "https://api.github.com/repos/PrismarineJS/prismarine-provider-anvil/issues/events/505178844"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2346494?v=3",
                "events_url": "https://api.github.com/users/rom1504/events{/privacy}",
                "followers_url": "https://api.github.com/users/rom1504/followers",
                "following_url": "https://api.github.com/users/rom1504/following{/other_user}",
                "gists_url": "https://api.github.com/users/rom1504/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rom1504",
                "id": 2346494,
                "login": "rom1504",
                "organizations_url": "https://api.github.com/users/rom1504/orgs",
                "received_events_url": "https://api.github.com/users/rom1504/received_events",
                "repos_url": "https://api.github.com/users/rom1504/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rom1504/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rom1504/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rom1504"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2016-01-04T20:18:40Z",
            "event": "closed",
            "id": 505178845,
            "url": "https://api.github.com/repos/PrismarineJS/prismarine-provider-anvil/issues/events/505178845"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2346494?v=3",
                "events_url": "https://api.github.com/users/rom1504/events{/privacy}",
                "followers_url": "https://api.github.com/users/rom1504/followers",
                "following_url": "https://api.github.com/users/rom1504/following{/other_user}",
                "gists_url": "https://api.github.com/users/rom1504/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rom1504",
                "id": 2346494,
                "login": "rom1504",
                "organizations_url": "https://api.github.com/users/rom1504/orgs",
                "received_events_url": "https://api.github.com/users/rom1504/received_events",
                "repos_url": "https://api.github.com/users/rom1504/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rom1504/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rom1504/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rom1504"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2016-01-04T20:18:43Z",
            "event": "head_ref_deleted",
            "id": 505178879,
            "url": "https://api.github.com/repos/PrismarineJS/prismarine-provider-anvil/issues/events/505178879"
        }
    ],
    "events_url": "https://api.github.com/repos/PrismarineJS/prismarine-provider-anvil/issues/7/events",
    "html_url": "https://github.com/PrismarineJS/prismarine-provider-anvil/pull/7",
    "id": 123556324,
    "labels": [],
    "labels_url": "https://api.github.com/repos/PrismarineJS/prismarine-provider-anvil/issues/7/labels{/name}",
    "locked": false,
    "milestone": null,
    "number": 7,
    "pull_request": {
        "diff_url": "https://github.com/PrismarineJS/prismarine-provider-anvil/pull/7.diff",
        "html_url": "https://github.com/PrismarineJS/prismarine-provider-anvil/pull/7",
        "patch_url": "https://github.com/PrismarineJS/prismarine-provider-anvil/pull/7.patch",
        "url": "https://api.github.com/repos/PrismarineJS/prismarine-provider-anvil/pulls/7"
    },
    "state": "closed",
    "title": "work toward reimplementation, see #6",
    "updated_at": "2016-01-10T01:31:10Z",
    "url": "https://api.github.com/repos/PrismarineJS/prismarine-provider-anvil/issues/7",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/2346494?v=3",
        "events_url": "https://api.github.com/users/rom1504/events{/privacy}",
        "followers_url": "https://api.github.com/users/rom1504/followers",
        "following_url": "https://api.github.com/users/rom1504/following{/other_user}",
        "gists_url": "https://api.github.com/users/rom1504/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/rom1504",
        "id": 2346494,
        "login": "rom1504",
        "organizations_url": "https://api.github.com/users/rom1504/orgs",
        "received_events_url": "https://api.github.com/users/rom1504/received_events",
        "repos_url": "https://api.github.com/users/rom1504/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/rom1504/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/rom1504/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/rom1504"
    }
}