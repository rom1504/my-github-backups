{
    "assignee": null,
    "body": "Here's what I have tried so far:\r\n\r\n```\r\nvar mineflayer = require('mineflayer');\r\nvar options = {\r\n  host: \"192.227.244.15\", // optional\r\n  port: 25565,       // optional\r\n  username: \"\", // email and password are required only for\r\n  password: \"\",          // online-mode=true servers\r\n};\r\nvar bot = mineflayer.createBot(options);\r\n\r\nbot.on('login', function() {\r\n  console.log(\"I logged in.\");\r\n  console.log(\"settings\", bot.settings);\r\n});\r\n\r\nbot.on('kicked', function(reason) {\r\n  console.log(\"I got kicked for\", reason, \"lol\");\r\n  bot.end;\r\n  bot.connect(options);\r\n});\r\n```\r\n\r\nbut all I got was this error:\r\n\r\n(using Cloud9ide)\r\n\r\n```\r\nI got kicked for Kicked by an operator. lol\r\n\r\n/var/lib/stickshift/5295aab1e0b8cd5eaa0000d5/app-root/data/694471/node_modules/mineflayer/node_modules/minecraft-protocol/lib/client.js:96\r\n  this.socket.write(out);\r\n              ^\r\nTypeError: Cannot call method 'write' of null\r\n    at Client.write (/var/lib/stickshift/5295aab1e0b8cd5eaa0000d5/app-root/data/694471/node_modules/mineflayer/node_modules/minecraft-protocol/lib/client.js:96:15)\r\n    at sendPositionAndLook (/var/lib/stickshift/5295aab1e0b8cd5eaa0000d5/app-root/data/694471/node_modules/mineflayer/lib/plugins/physics.js:228:16)\r\n    at sendPosition (/var/lib/stickshift/5295aab1e0b8cd5eaa0000d5/app-root/data/694471/node_modules/mineflayer/lib/plugins/physics.js:256:5)\r\n    at wrapper [as _onTimeout] (timers.js:252:14)\r\n    at Timer.listOnTimeout [as ontimeout] (timers.js:110:15)\r\n```",
    "closed_at": "2014-04-21T22:48:17Z",
    "comment_data": [
        {
            "body": "Using this reconnects but the events stop working, could anyone point me in the right direction?\r\n\r\n```\r\nbot.on('kicked', function(reason) {\r\n  console.log(\"I got kicked for\", reason, \"lol\");\r\n  bot.quit\r\n  bot.end\r\n  bot = mineflayer.createBot(options);\r\n});\r\n```",
            "created_at": "2013-11-29T16:58:52Z",
            "html_url": "https://github.com/PrismarineJS/mineflayer/issues/164#issuecomment-29527589",
            "id": 29527589,
            "issue_url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/164",
            "updated_at": "2013-11-29T16:59:46Z",
            "url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/comments/29527589",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/916153?v=3",
                "events_url": "https://api.github.com/users/JonnyD/events{/privacy}",
                "followers_url": "https://api.github.com/users/JonnyD/followers",
                "following_url": "https://api.github.com/users/JonnyD/following{/other_user}",
                "gists_url": "https://api.github.com/users/JonnyD/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/JonnyD",
                "id": 916153,
                "login": "JonnyD",
                "organizations_url": "https://api.github.com/users/JonnyD/orgs",
                "received_events_url": "https://api.github.com/users/JonnyD/received_events",
                "repos_url": "https://api.github.com/users/JonnyD/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/JonnyD/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/JonnyD/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/JonnyD"
            }
        },
        {
            "body": "Seems like that code should work, although keep in mind that in JavaScript, `bot.quit` and `bot.end` do nothing - what you want are `bot.quit()` and `bot.end()`. ",
            "created_at": "2013-11-29T20:04:41Z",
            "html_url": "https://github.com/PrismarineJS/mineflayer/issues/164#issuecomment-29535461",
            "id": 29535461,
            "issue_url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/164",
            "updated_at": "2013-11-29T20:04:41Z",
            "url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/comments/29535461",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/106511?v=3",
                "events_url": "https://api.github.com/users/andrewrk/events{/privacy}",
                "followers_url": "https://api.github.com/users/andrewrk/followers",
                "following_url": "https://api.github.com/users/andrewrk/following{/other_user}",
                "gists_url": "https://api.github.com/users/andrewrk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/andrewrk",
                "id": 106511,
                "login": "andrewrk",
                "organizations_url": "https://api.github.com/users/andrewrk/orgs",
                "received_events_url": "https://api.github.com/users/andrewrk/received_events",
                "repos_url": "https://api.github.com/users/andrewrk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/andrewrk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/andrewrk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/andrewrk"
            }
        },
        {
            "body": "That error above looks like maybe if you get kicked, you're already disconnected, so you can't call `bot.quit()`. Try only calling `bot.end()` or calling neither and skip straight to the `bot = mineflayer.createBot(options)` part.",
            "created_at": "2013-11-29T20:06:03Z",
            "html_url": "https://github.com/PrismarineJS/mineflayer/issues/164#issuecomment-29535510",
            "id": 29535510,
            "issue_url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/164",
            "updated_at": "2013-11-29T20:06:03Z",
            "url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/comments/29535510",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/106511?v=3",
                "events_url": "https://api.github.com/users/andrewrk/events{/privacy}",
                "followers_url": "https://api.github.com/users/andrewrk/followers",
                "following_url": "https://api.github.com/users/andrewrk/following{/other_user}",
                "gists_url": "https://api.github.com/users/andrewrk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/andrewrk",
                "id": 106511,
                "login": "andrewrk",
                "organizations_url": "https://api.github.com/users/andrewrk/orgs",
                "received_events_url": "https://api.github.com/users/andrewrk/received_events",
                "repos_url": "https://api.github.com/users/andrewrk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/andrewrk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/andrewrk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/andrewrk"
            }
        },
        {
            "body": "Thanks for your response. I have tried this but it only works once. After being kicked the first time it reconnects but it then stops triggering events and because it stops triggering events (e.g. bot.on('kicked'..)) the next kick disconnects the bot forever. Any idea?\r\n\r\n```\r\nvar mineflayer = require('mineflayer');\r\n\r\nvar options = {\r\n  host: \"192.227.244.15\", // optional\r\n  port: 25565,       // optional\r\n  username: \"\", // email and password are required only for\r\n  password: \"\",          // online-mode=true servers\r\n};\r\n\r\nvar bot = mineflayer.createBot(options);\r\n\r\nbot.on('login', function() {\r\n  console.log(\"I logged in.\");\r\n  console.log(\"settings\", bot.settings);\r\n});\r\n\r\nbot.on('playerJoined', function(player) {\r\n  console.log(player.username + \" joined\");\r\n});\r\n\r\nbot.on('playerLeft', function(player) {\r\n  console.log(player.username + \" left\");\r\n});\r\n\r\nbot.on('kicked', function(reason) {\r\n  console.log(\"I got kicked for\", reason, \"lol\");\r\n  bot = mineflayer.createBot(options);\r\n});\r\n\r\nbot.on('spawn', function() {\r\n  console.log(\"I have spawned\");\r\n  console.log(\"game\", bot.game);\r\n});\r\n\r\nbot.on('death', function() {\r\n  bot.chat(\"I died x.x\");\r\n});\r\n```",
            "created_at": "2013-11-29T22:38:16Z",
            "html_url": "https://github.com/PrismarineJS/mineflayer/issues/164#issuecomment-29540216",
            "id": 29540216,
            "issue_url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/164",
            "updated_at": "2013-11-29T22:50:15Z",
            "url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/comments/29540216",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/916153?v=3",
                "events_url": "https://api.github.com/users/JonnyD/events{/privacy}",
                "followers_url": "https://api.github.com/users/JonnyD/followers",
                "following_url": "https://api.github.com/users/JonnyD/following{/other_user}",
                "gists_url": "https://api.github.com/users/JonnyD/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/JonnyD",
                "id": 916153,
                "login": "JonnyD",
                "organizations_url": "https://api.github.com/users/JonnyD/orgs",
                "received_events_url": "https://api.github.com/users/JonnyD/received_events",
                "repos_url": "https://api.github.com/users/JonnyD/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/JonnyD/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/JonnyD/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/JonnyD"
            }
        },
        {
            "body": "You're replacing the `bot` variable with a new object. The handlers you attached are all attached to the old reference. You need to attach your handlers to the new instances as well.",
            "created_at": "2013-11-29T22:57:15Z",
            "html_url": "https://github.com/PrismarineJS/mineflayer/issues/164#issuecomment-29540706",
            "id": 29540706,
            "issue_url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/164",
            "updated_at": "2013-11-29T22:57:15Z",
            "url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/comments/29540706",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/106511?v=3",
                "events_url": "https://api.github.com/users/andrewrk/events{/privacy}",
                "followers_url": "https://api.github.com/users/andrewrk/followers",
                "following_url": "https://api.github.com/users/andrewrk/following{/other_user}",
                "gists_url": "https://api.github.com/users/andrewrk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/andrewrk",
                "id": 106511,
                "login": "andrewrk",
                "organizations_url": "https://api.github.com/users/andrewrk/orgs",
                "received_events_url": "https://api.github.com/users/andrewrk/received_events",
                "repos_url": "https://api.github.com/users/andrewrk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/andrewrk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/andrewrk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/andrewrk"
            }
        },
        {
            "body": "Got it working like this but is it best practice? Coming from a Java & PHP background node.js isn't as intuitive to me.\r\n\r\n```\r\nvar mineflayer = require('mineflayer');\r\nvar options = {\r\n  //host: \"mc.civcraft.vg\",\r\n  host: \"192.227.244.15\",\r\n  port: 25565,\r\n  username: \"\",\r\n  password: \"\",\r\n};\r\n\r\nvar bot = mineflayer.createBot(options);\r\n\r\nbindEvents(bot);\r\n\r\nfunction bindEvents(bot) {\r\n    bot.on('login', function() {\r\n      console.log(\"I logged in.\");\r\n      console.log(\"settings\", bot.settings);\r\n    });\r\n\r\n    bot.on('kicked', function(reason) {\r\n      console.log(\"I got kicked for\", reason, \"lol\");\r\n\r\n      bot = mineflayer.createBot(options);\r\n      bindEvents(bot);\r\n    });\r\n}\r\n\r\n```",
            "created_at": "2013-11-30T18:07:11Z",
            "html_url": "https://github.com/PrismarineJS/mineflayer/issues/164#issuecomment-29557539",
            "id": 29557539,
            "issue_url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/164",
            "updated_at": "2013-11-30T18:07:11Z",
            "url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/comments/29557539",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/916153?v=3",
                "events_url": "https://api.github.com/users/JonnyD/events{/privacy}",
                "followers_url": "https://api.github.com/users/JonnyD/followers",
                "following_url": "https://api.github.com/users/JonnyD/following{/other_user}",
                "gists_url": "https://api.github.com/users/JonnyD/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/JonnyD",
                "id": 916153,
                "login": "JonnyD",
                "organizations_url": "https://api.github.com/users/JonnyD/orgs",
                "received_events_url": "https://api.github.com/users/JonnyD/received_events",
                "repos_url": "https://api.github.com/users/JonnyD/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/JonnyD/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/JonnyD/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/JonnyD"
            }
        },
        {
            "body": "Seems fine to me. As your code base grows you'll figure out what organization works best for you.",
            "created_at": "2013-11-30T19:33:57Z",
            "html_url": "https://github.com/PrismarineJS/mineflayer/issues/164#issuecomment-29559249",
            "id": 29559249,
            "issue_url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/164",
            "updated_at": "2013-11-30T19:33:57Z",
            "url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/comments/29559249",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/106511?v=3",
                "events_url": "https://api.github.com/users/andrewrk/events{/privacy}",
                "followers_url": "https://api.github.com/users/andrewrk/followers",
                "following_url": "https://api.github.com/users/andrewrk/following{/other_user}",
                "gists_url": "https://api.github.com/users/andrewrk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/andrewrk",
                "id": 106511,
                "login": "andrewrk",
                "organizations_url": "https://api.github.com/users/andrewrk/orgs",
                "received_events_url": "https://api.github.com/users/andrewrk/received_events",
                "repos_url": "https://api.github.com/users/andrewrk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/andrewrk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/andrewrk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/andrewrk"
            }
        },
        {
            "body": "Closed, issue seems fixed, comment if this needs a re-open",
            "created_at": "2014-04-21T22:48:17Z",
            "html_url": "https://github.com/PrismarineJS/mineflayer/issues/164#issuecomment-40985901",
            "id": 40985901,
            "issue_url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/164",
            "updated_at": "2014-04-21T22:48:27Z",
            "url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/comments/40985901",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/834342?v=3",
                "events_url": "https://api.github.com/users/nevercast/events{/privacy}",
                "followers_url": "https://api.github.com/users/nevercast/followers",
                "following_url": "https://api.github.com/users/nevercast/following{/other_user}",
                "gists_url": "https://api.github.com/users/nevercast/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/nevercast",
                "id": 834342,
                "login": "nevercast",
                "organizations_url": "https://api.github.com/users/nevercast/orgs",
                "received_events_url": "https://api.github.com/users/nevercast/received_events",
                "repos_url": "https://api.github.com/users/nevercast/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/nevercast/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/nevercast/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/nevercast"
            }
        }
    ],
    "comments": 8,
    "comments_url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/164/comments",
    "created_at": "2013-11-29T16:28:09Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/834342?v=3",
                "events_url": "https://api.github.com/users/nevercast/events{/privacy}",
                "followers_url": "https://api.github.com/users/nevercast/followers",
                "following_url": "https://api.github.com/users/nevercast/following{/other_user}",
                "gists_url": "https://api.github.com/users/nevercast/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/nevercast",
                "id": 834342,
                "login": "nevercast",
                "organizations_url": "https://api.github.com/users/nevercast/orgs",
                "received_events_url": "https://api.github.com/users/nevercast/received_events",
                "repos_url": "https://api.github.com/users/nevercast/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/nevercast/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/nevercast/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/nevercast"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2014-04-21T22:48:17Z",
            "event": "closed",
            "id": 113669700,
            "url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/events/113669700"
        }
    ],
    "events_url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/164/events",
    "html_url": "https://github.com/PrismarineJS/mineflayer/issues/164",
    "id": 23500593,
    "labels": [],
    "labels_url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/164/labels{/name}",
    "locked": false,
    "milestone": null,
    "number": 164,
    "state": "closed",
    "title": "Is it possible to reconnect automatically after being kicked?",
    "updated_at": "2014-04-21T22:48:27Z",
    "url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/164",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/916153?v=3",
        "events_url": "https://api.github.com/users/JonnyD/events{/privacy}",
        "followers_url": "https://api.github.com/users/JonnyD/followers",
        "following_url": "https://api.github.com/users/JonnyD/following{/other_user}",
        "gists_url": "https://api.github.com/users/JonnyD/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/JonnyD",
        "id": 916153,
        "login": "JonnyD",
        "organizations_url": "https://api.github.com/users/JonnyD/orgs",
        "received_events_url": "https://api.github.com/users/JonnyD/received_events",
        "repos_url": "https://api.github.com/users/JonnyD/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/JonnyD/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/JonnyD/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/JonnyD"
    }
}