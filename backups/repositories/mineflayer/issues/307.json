{
    "assignee": null,
    "body": "I have a function that looks like this: \r\n\r\n```javascript\r\nfunction prepareInventory() {\r\n        bot.tossStack(bot.inventory.items()[0], function(error) {\r\n          console.log(error);\r\n        });\r\n        bot.tossStack(bot.inventory.items()[1], function(error) {\r\n          console.log(error);\r\n        });\r\n        bot.tossStack(bot.inventory.items()[2], function(error) {\r\n          console.log(error);\r\n        });\r\n}\r\n```\r\n\r\nBasically what it attempts to do is toss the first three stacks in the items array. What actually happens is it only tosses the third stack.\r\n\r\nFor trouble shooting I've added a function to log every change in the inventory, so we can see what happens. It looks like this:\r\n\r\n```javascript\r\nbot.inventory.on('windowUpdate', function(slot, oldItem, newItem) {\r\n  if(oldItem && newItem) {\r\n    console.log(oldItem.name + \" in slot \" + slot + \" replaced by \" + newItem.name);\r\n  }\r\n  else if(oldItem) {\r\n    console.log(oldItem.name + \" in slot \" + slot + \" removed\");\r\n  }\r\n});\r\n```\r\n\r\nI ran this with some stone brick, some dirt, and some wool. Here is the output in the console, undefined being the error callback. In game, the wool is what ended up being tossed.\r\n```\r\nstonebrick in slot 36 removed\r\ndirt in slot 37 replaced by stonebrick\r\nwool in slot 38 replaced by dirt\r\nundefined\r\nundefined\r\nundefined\r\n```\r\n\r\nWhat it looks like is happening to me is it picks up the first item that it is instructed to toss, but instead of actually tossing it, it appears that it just clicks on the slot of the next item it was instructed to toss. Is there a known work around for this? If not, will there be a possible fix? I will poke around the source myself to see if I can find anything.\r\n\r\nNot sure if I worded this to be as clear as possible, I'm writing this pretty late. I can explain anything if needed.",
    "closed_at": "2015-07-11T13:59:29Z",
    "comment_data": [
        {
            "body": "So in the simple_inventory.js, I see that they way tossStack works is that it clicks the slot the item is in, and then if the callback does not return an error, it clicks outside of the inventory. The problem with this appears to be that the callback doesn't run until after the function calling tossStack completes. I have virtually no knowledge of javascript, so I'm not sure how this kind of thing works. Would it be possible to just add the line clicking outside of the window right after the line clicking on the slot, but outside of the callback? I've tested it on a server and it works, but I'm not sure what will happen under non-ideal circumstances where it runs into errors. ",
            "created_at": "2015-07-11T04:17:51Z",
            "html_url": "https://github.com/PrismarineJS/mineflayer/issues/307#issuecomment-120571330",
            "id": 120571330,
            "issue_url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/307",
            "updated_at": "2015-07-11T04:17:51Z",
            "url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/comments/120571330",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5948548?v=3",
                "events_url": "https://api.github.com/users/cartycrabber/events{/privacy}",
                "followers_url": "https://api.github.com/users/cartycrabber/followers",
                "following_url": "https://api.github.com/users/cartycrabber/following{/other_user}",
                "gists_url": "https://api.github.com/users/cartycrabber/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cartycrabber",
                "id": 5948548,
                "login": "cartycrabber",
                "organizations_url": "https://api.github.com/users/cartycrabber/orgs",
                "received_events_url": "https://api.github.com/users/cartycrabber/received_events",
                "repos_url": "https://api.github.com/users/cartycrabber/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cartycrabber/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cartycrabber/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cartycrabber"
            }
        },
        {
            "body": "I'm also finding the toss function to have similar issues, only it actually crashes if you call it multiple times in one function. Trying to find a possible fix for that now too. ",
            "created_at": "2015-07-11T04:42:37Z",
            "html_url": "https://github.com/PrismarineJS/mineflayer/issues/307#issuecomment-120572369",
            "id": 120572369,
            "issue_url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/307",
            "updated_at": "2015-07-11T04:49:40Z",
            "url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/comments/120572369",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5948548?v=3",
                "events_url": "https://api.github.com/users/cartycrabber/events{/privacy}",
                "followers_url": "https://api.github.com/users/cartycrabber/followers",
                "following_url": "https://api.github.com/users/cartycrabber/following{/other_user}",
                "gists_url": "https://api.github.com/users/cartycrabber/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cartycrabber",
                "id": 5948548,
                "login": "cartycrabber",
                "organizations_url": "https://api.github.com/users/cartycrabber/orgs",
                "received_events_url": "https://api.github.com/users/cartycrabber/received_events",
                "repos_url": "https://api.github.com/users/cartycrabber/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cartycrabber/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cartycrabber/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cartycrabber"
            }
        },
        {
            "body": "You are doing it wrong.\r\nYou need to execute the next action *in* the callback.\r\nWhat you are trying to do right now is to toss 3 items at the same time, which obviously isn't possible and is going to break !\r\nYou should learn more about callbacks, you'll need to use them at lot of places in node.js ;)",
            "created_at": "2015-07-11T11:03:27Z",
            "html_url": "https://github.com/PrismarineJS/mineflayer/issues/307#issuecomment-120603961",
            "id": 120603961,
            "issue_url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/307",
            "updated_at": "2015-07-11T11:04:20Z",
            "url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/comments/120603961",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2346494?v=3",
                "events_url": "https://api.github.com/users/rom1504/events{/privacy}",
                "followers_url": "https://api.github.com/users/rom1504/followers",
                "following_url": "https://api.github.com/users/rom1504/following{/other_user}",
                "gists_url": "https://api.github.com/users/rom1504/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rom1504",
                "id": 2346494,
                "login": "rom1504",
                "organizations_url": "https://api.github.com/users/rom1504/orgs",
                "received_events_url": "https://api.github.com/users/rom1504/received_events",
                "repos_url": "https://api.github.com/users/rom1504/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rom1504/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rom1504/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rom1504"
            }
        },
        {
            "body": "Ah, that makes a lot of sense now that you say it, thank you! Most of my experience is in Java and C# so I'm still trying to completely figure out this whole JavaScript and Node thing. \r\n\r\nThat said, I did get tossStack to work in the way I had originally tried, but I'll see about using it properly now :P",
            "created_at": "2015-07-11T13:59:29Z",
            "html_url": "https://github.com/PrismarineJS/mineflayer/issues/307#issuecomment-120623218",
            "id": 120623218,
            "issue_url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/307",
            "updated_at": "2015-07-11T13:59:29Z",
            "url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/comments/120623218",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5948548?v=3",
                "events_url": "https://api.github.com/users/cartycrabber/events{/privacy}",
                "followers_url": "https://api.github.com/users/cartycrabber/followers",
                "following_url": "https://api.github.com/users/cartycrabber/following{/other_user}",
                "gists_url": "https://api.github.com/users/cartycrabber/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cartycrabber",
                "id": 5948548,
                "login": "cartycrabber",
                "organizations_url": "https://api.github.com/users/cartycrabber/orgs",
                "received_events_url": "https://api.github.com/users/cartycrabber/received_events",
                "repos_url": "https://api.github.com/users/cartycrabber/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cartycrabber/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cartycrabber/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cartycrabber"
            }
        },
        {
            "body": "One more quick but completely unrelated question: Is it possible to allow the user to type into the command line while the bot is running, and to read whatever they have typed after they hit enter? To be able to provide commands from the command line. I'm positive there should be a way, but as a complete node noob, im wondering if you can just point me in the right direction",
            "created_at": "2015-07-11T21:21:09Z",
            "html_url": "https://github.com/PrismarineJS/mineflayer/issues/307#issuecomment-120662258",
            "id": 120662258,
            "issue_url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/307",
            "updated_at": "2015-07-11T21:21:09Z",
            "url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/comments/120662258",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5948548?v=3",
                "events_url": "https://api.github.com/users/cartycrabber/events{/privacy}",
                "followers_url": "https://api.github.com/users/cartycrabber/followers",
                "following_url": "https://api.github.com/users/cartycrabber/following{/other_user}",
                "gists_url": "https://api.github.com/users/cartycrabber/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cartycrabber",
                "id": 5948548,
                "login": "cartycrabber",
                "organizations_url": "https://api.github.com/users/cartycrabber/orgs",
                "received_events_url": "https://api.github.com/users/cartycrabber/received_events",
                "repos_url": "https://api.github.com/users/cartycrabber/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cartycrabber/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cartycrabber/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cartycrabber"
            }
        },
        {
            "body": "@cartycrabber You'll want to look at the \"readline\" nodejs module https://nodejs.org/api/readline.html . You can look at [this](https://github.com/PrismarineJS/node-minecraft-protocol/blob/master/examples/client_chat/client_chat.js) for an example of how to use it (search for `rl.on('chat'`)",
            "created_at": "2015-07-11T22:45:46Z",
            "html_url": "https://github.com/PrismarineJS/mineflayer/issues/307#issuecomment-120666623",
            "id": 120666623,
            "issue_url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/307",
            "updated_at": "2015-07-11T22:46:02Z",
            "url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/comments/120666623",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1069318?v=3",
                "events_url": "https://api.github.com/users/roblabla/events{/privacy}",
                "followers_url": "https://api.github.com/users/roblabla/followers",
                "following_url": "https://api.github.com/users/roblabla/following{/other_user}",
                "gists_url": "https://api.github.com/users/roblabla/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/roblabla",
                "id": 1069318,
                "login": "roblabla",
                "organizations_url": "https://api.github.com/users/roblabla/orgs",
                "received_events_url": "https://api.github.com/users/roblabla/received_events",
                "repos_url": "https://api.github.com/users/roblabla/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/roblabla/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/roblabla/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/roblabla"
            }
        }
    ],
    "comments": 6,
    "comments_url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/307/comments",
    "created_at": "2015-07-11T03:55:45Z",
    "event_data": [
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5948548?v=3",
                "events_url": "https://api.github.com/users/cartycrabber/events{/privacy}",
                "followers_url": "https://api.github.com/users/cartycrabber/followers",
                "following_url": "https://api.github.com/users/cartycrabber/following{/other_user}",
                "gists_url": "https://api.github.com/users/cartycrabber/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cartycrabber",
                "id": 5948548,
                "login": "cartycrabber",
                "organizations_url": "https://api.github.com/users/cartycrabber/orgs",
                "received_events_url": "https://api.github.com/users/cartycrabber/received_events",
                "repos_url": "https://api.github.com/users/cartycrabber/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cartycrabber/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cartycrabber/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cartycrabber"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2015-07-11T13:59:29Z",
            "event": "closed",
            "id": 353566880,
            "url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/events/353566880"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5948548?v=3",
                "events_url": "https://api.github.com/users/cartycrabber/events{/privacy}",
                "followers_url": "https://api.github.com/users/cartycrabber/followers",
                "following_url": "https://api.github.com/users/cartycrabber/following{/other_user}",
                "gists_url": "https://api.github.com/users/cartycrabber/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cartycrabber",
                "id": 5948548,
                "login": "cartycrabber",
                "organizations_url": "https://api.github.com/users/cartycrabber/orgs",
                "received_events_url": "https://api.github.com/users/cartycrabber/received_events",
                "repos_url": "https://api.github.com/users/cartycrabber/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cartycrabber/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cartycrabber/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cartycrabber"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2015-07-11T22:45:46Z",
            "event": "mentioned",
            "id": 353664712,
            "url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/events/353664712"
        },
        {
            "actor": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5948548?v=3",
                "events_url": "https://api.github.com/users/cartycrabber/events{/privacy}",
                "followers_url": "https://api.github.com/users/cartycrabber/followers",
                "following_url": "https://api.github.com/users/cartycrabber/following{/other_user}",
                "gists_url": "https://api.github.com/users/cartycrabber/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cartycrabber",
                "id": 5948548,
                "login": "cartycrabber",
                "organizations_url": "https://api.github.com/users/cartycrabber/orgs",
                "received_events_url": "https://api.github.com/users/cartycrabber/received_events",
                "repos_url": "https://api.github.com/users/cartycrabber/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cartycrabber/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cartycrabber/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cartycrabber"
            },
            "commit_id": null,
            "commit_url": null,
            "created_at": "2015-07-11T22:45:46Z",
            "event": "subscribed",
            "id": 353664713,
            "url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/events/353664713"
        }
    ],
    "events_url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/307/events",
    "html_url": "https://github.com/PrismarineJS/mineflayer/issues/307",
    "id": 94432770,
    "labels": [],
    "labels_url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/307/labels{/name}",
    "locked": false,
    "milestone": null,
    "number": 307,
    "repository_url": "https://api.github.com/repos/PrismarineJS/mineflayer",
    "state": "closed",
    "title": "Unable to toss multiple stacks in the same function",
    "updated_at": "2015-07-11T22:46:02Z",
    "url": "https://api.github.com/repos/PrismarineJS/mineflayer/issues/307",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/5948548?v=3",
        "events_url": "https://api.github.com/users/cartycrabber/events{/privacy}",
        "followers_url": "https://api.github.com/users/cartycrabber/followers",
        "following_url": "https://api.github.com/users/cartycrabber/following{/other_user}",
        "gists_url": "https://api.github.com/users/cartycrabber/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/cartycrabber",
        "id": 5948548,
        "login": "cartycrabber",
        "organizations_url": "https://api.github.com/users/cartycrabber/orgs",
        "received_events_url": "https://api.github.com/users/cartycrabber/received_events",
        "repos_url": "https://api.github.com/users/cartycrabber/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/cartycrabber/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/cartycrabber/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/cartycrabber"
    }
}